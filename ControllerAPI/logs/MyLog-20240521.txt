2024-05-21 07:49:35.028 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-21 07:49:35.475 +07:00 [INF] Now listening on: https://localhost:7035
2024-05-21 07:49:35.476 +07:00 [INF] Now listening on: http://localhost:5287
2024-05-21 07:49:35.479 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-21 07:49:35.480 +07:00 [INF] Hosting environment: Development
2024-05-21 07:49:35.480 +07:00 [INF] Content root path: D:\API\ProjectWeb2\WebAPIAnimals\ControllerAPI
2024-05-21 07:49:37.710 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 07:49:38.245 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 538.2041ms
2024-05-21 07:49:38.254 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 07:49:39.238 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:49:39.270 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:49:39.832 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:49:39.889 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 07:49:39.889 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 07:49:39.897 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.4784ms
2024-05-21 07:49:39.957 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.047ms
2024-05-21 07:49:41.175 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 07:49:41.368 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.0839ms
2024-05-21 07:49:42.749 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 07:49:42.790 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 07:49:42.796 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2957.173ms.
2024-05-21 07:49:42.804 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 07:49:42.830 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 3553.5418ms
2024-05-21 07:49:42.831 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:49:42.845 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 4591.7ms
2024-05-21 07:49:47.014 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 07:49:47.020 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:49:47.023 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:49:47.027 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:49:47.146 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 07:49:47.149 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 07:49:47.151 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 122.9935ms.
2024-05-21 07:49:47.153 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 07:49:47.154 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 128.521ms
2024-05-21 07:49:47.155 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:49:47.156 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 142.5178ms
2024-05-21 07:50:04.124 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 07:50:04.128 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:50:04.129 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:50:04.134 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:50:04.196 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 07:50:04.199 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 07:50:04.200 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 64.9832ms.
2024-05-21 07:50:04.201 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 07:50:04.202 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 71.6082ms
2024-05-21 07:50:04.202 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:50:04.203 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 79.6344ms
2024-05-21 07:50:06.131 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 07:50:06.135 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:50:06.136 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:50:06.137 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:50:06.146 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 07:50:06.149 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 07:50:06.150 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.2182ms.
2024-05-21 07:50:06.151 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 07:50:06.152 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 14.9538ms
2024-05-21 07:50:06.153 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:50:06.154 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 22.5436ms
2024-05-21 07:51:44.536 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 07:51:44.539 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:51:44.539 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:51:44.541 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:51:44.550 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 07:51:44.553 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 07:51:44.555 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.8849ms.
2024-05-21 07:51:44.557 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 07:51:44.558 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 17.6768ms
2024-05-21 07:51:44.559 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:51:44.561 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 25.4322ms
2024-05-21 07:51:44.818 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 07:51:44.833 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 14.1183ms
2024-05-21 07:51:44.961 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 07:51:44.963 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 2.3346ms
2024-05-21 07:51:44.974 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 07:51:44.980 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.5927ms
2024-05-21 07:51:46.004 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 07:51:46.011 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.9531ms
2024-05-21 07:51:47.515 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 07:51:47.519 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:51:47.523 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:51:47.526 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:51:47.532 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 07:51:47.535 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 07:51:47.535 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.9609ms.
2024-05-21 07:51:47.537 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 07:51:47.540 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 14.7602ms
2024-05-21 07:51:47.542 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:51:47.542 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 27.9548ms
2024-05-21 07:51:53.307 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Update/3 - application/json; charset=utf-8 902
2024-05-21 07:51:53.310 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Update/3 - 404 0 null 3.0432ms
2024-05-21 07:51:53.313 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7035/api/Animal/Update/3, Response status code: 404
2024-05-21 07:52:03.740 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7035/api/Animal/Update?id=0 - application/json 83
2024-05-21 07:52:03.743 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Put (ControllerAPI)'
2024-05-21 07:52:03.745 +07:00 [INF] Route matched with {action = "Put", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Put(DataAnimals.DTO.Animal.AddAnimalDto, Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:52:03.762 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Put (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:52:03.796 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__Id_0
2024-05-21 07:52:03.807 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Animal_Id], [a].[Category_Id]
FROM [AnimalCategories] AS [a]
WHERE [a].[Id] = @__Id_0
2024-05-21 07:52:03.819 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 07:52:03.820 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Put (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.3672ms.
2024-05-21 07:52:03.822 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 07:52:03.824 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Put (ControllerAPI) in 78.5519ms
2024-05-21 07:52:03.825 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Put (ControllerAPI)'
2024-05-21 07:52:03.826 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7035/api/Animal/Update?id=0 - 200 null application/json; charset=utf-8 86.6375ms
2024-05-21 07:52:12.237 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Update?id=3 - application/json; charset=utf-8 902
2024-05-21 07:52:12.239 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2024-05-21 07:52:12.240 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2024-05-21 07:52:12.241 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Update?id=3 - 405 0 null 3.4499ms
2024-05-21 07:52:12.303 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 07:52:12.318 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 14.5386ms
2024-05-21 07:52:12.337 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 07:52:12.337 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 07:52:12.344 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.4063ms
2024-05-21 07:52:12.344 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.148ms
2024-05-21 07:52:13.082 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 07:52:13.092 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.7767ms
2024-05-21 07:52:15.284 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 07:52:15.286 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:52:15.287 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:52:15.289 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:52:15.294 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 07:52:15.296 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 07:52:15.297 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.2204ms.
2024-05-21 07:52:15.298 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 07:52:15.301 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 12.0856ms
2024-05-21 07:52:15.302 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:52:15.303 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 18.4937ms
2024-05-21 07:52:16.478 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Update?id=3 - application/json; charset=utf-8 902
2024-05-21 07:52:16.482 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2024-05-21 07:52:16.483 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2024-05-21 07:52:16.484 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Update?id=3 - 405 0 null 6.5127ms
2024-05-21 07:53:31.670 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 07:53:31.697 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 26.3839ms
2024-05-21 07:53:31.722 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 07:53:31.722 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 07:53:31.727 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.9501ms
2024-05-21 07:53:31.730 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.861ms
2024-05-21 07:53:32.732 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 07:53:32.738 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.2429ms
2024-05-21 07:53:33.740 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 07:53:33.742 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:53:33.745 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:53:33.747 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:53:33.756 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 07:53:33.758 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 07:53:33.759 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.8975ms.
2024-05-21 07:53:33.760 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 07:53:33.761 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 15.4472ms
2024-05-21 07:53:33.763 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:53:33.764 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 23.6045ms
2024-05-21 07:53:36.164 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 07:53:36.168 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:53:36.169 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:53:36.171 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:53:36.174 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 07:53:36.176 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 07:53:36.177 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.4666ms.
2024-05-21 07:53:36.180 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 07:53:36.181 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 9.7647ms
2024-05-21 07:53:36.182 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:53:36.184 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 20.0996ms
2024-05-21 07:56:08.452 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 07:56:08.455 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:56:08.459 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:56:08.461 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:56:08.469 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 07:56:08.471 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 07:56:08.472 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.9949ms.
2024-05-21 07:56:08.473 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 07:56:08.474 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 13.5267ms
2024-05-21 07:56:08.475 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:56:08.475 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 23.3344ms
2024-05-21 07:58:22.740 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 07:58:22.742 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:58:22.743 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:58:22.745 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:58:22.748 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 07:58:22.749 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 07:58:22.750 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.4877ms.
2024-05-21 07:58:22.751 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 07:58:22.753 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.1441ms
2024-05-21 07:58:22.754 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:58:22.755 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.1016ms
2024-05-21 07:58:22.787 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 07:58:22.798 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 10.446ms
2024-05-21 07:58:22.825 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 07:58:22.825 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 07:58:22.828 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 3.2263ms
2024-05-21 07:58:22.854 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.3666ms
2024-05-21 07:58:24.051 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 07:58:24.055 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.3117ms
2024-05-21 07:58:25.602 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 07:58:25.606 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:58:25.608 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:58:25.610 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:58:25.614 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 07:58:25.617 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 07:58:25.618 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.6777ms.
2024-05-21 07:58:25.620 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 07:58:25.622 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 12.4094ms
2024-05-21 07:58:25.623 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:58:25.624 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 22.8629ms
2024-05-21 07:58:32.469 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Update?id=3 - application/json; charset=utf-8 902
2024-05-21 07:58:32.472 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2024-05-21 07:58:32.473 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2024-05-21 07:58:32.473 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Update?id=3 - 405 0 null 4.002ms
2024-05-21 07:59:53.038 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-21 07:59:53.311 +07:00 [INF] Now listening on: https://localhost:7035
2024-05-21 07:59:53.312 +07:00 [INF] Now listening on: http://localhost:5287
2024-05-21 07:59:53.314 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-21 07:59:53.317 +07:00 [INF] Hosting environment: Development
2024-05-21 07:59:53.318 +07:00 [INF] Content root path: D:\API\ProjectWeb2\WebAPIAnimals\ControllerAPI
2024-05-21 07:59:53.867 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 07:59:54.251 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 389.2411ms
2024-05-21 07:59:54.605 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 07:59:54.621 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.8077ms
2024-05-21 07:59:54.655 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 07:59:54.897 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 242.0256ms
2024-05-21 07:59:54.910 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 07:59:55.277 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:59:55.337 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:59:55.700 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:59:57.554 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 07:59:57.564 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 07:59:57.596 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 07:59:57.604 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1896.7945ms.
2024-05-21 07:59:57.616 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 07:59:57.648 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 2293.9575ms
2024-05-21 07:59:57.650 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 07:59:57.664 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 2754.2028ms
2024-05-21 07:59:57.712 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 148.6615ms
2024-05-21 07:59:59.290 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 07:59:59.298 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:59:59.302 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 07:59:59.309 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 07:59:59.409 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 07:59:59.412 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 07:59:59.414 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.5018ms.
2024-05-21 07:59:59.416 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 07:59:59.418 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 114.9443ms
2024-05-21 07:59:59.420 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 07:59:59.424 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 133.8951ms
2024-05-21 08:00:08.641 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7035/api/Animal/Update?id=3 - application/json; charset=utf-8 902
2024-05-21 08:00:08.644 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Put (ControllerAPI)'
2024-05-21 08:00:08.646 +07:00 [INF] Route matched with {action = "Put", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Put(DataAnimals.DTO.Animal.AddAnimalDto, Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:00:08.663 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Put (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:00:08.732 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__Id_0
2024-05-21 08:00:08.828 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Animals] SET [Description] = @p0, [Url] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2024-05-21 08:00:08.843 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Animal_Id], [a].[Category_Id]
FROM [AnimalCategories] AS [a]
WHERE [a].[Id] = @__Id_0
2024-05-21 08:00:08.845 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:00:08.846 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Put (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 182.4063ms.
2024-05-21 08:00:08.848 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:00:08.849 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Put (ControllerAPI) in 202.3741ms
2024-05-21 08:00:08.851 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Put (ControllerAPI)'
2024-05-21 08:00:08.853 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7035/api/Animal/Update?id=3 - 200 null application/json; charset=utf-8 212.0906ms
2024-05-21 08:00:08.903 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:00:08.906 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:00:08.907 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:00:08.909 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:00:08.946 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:00:08.948 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:00:08.949 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 38.3251ms.
2024-05-21 08:00:08.950 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:00:08.952 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 43.7305ms
2024-05-21 08:00:08.954 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:00:08.955 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 52.0934ms
2024-05-21 08:03:04.554 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-21 08:03:04.707 +07:00 [INF] Now listening on: https://localhost:7035
2024-05-21 08:03:04.710 +07:00 [INF] Now listening on: http://localhost:5287
2024-05-21 08:03:04.713 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-21 08:03:04.714 +07:00 [INF] Hosting environment: Development
2024-05-21 08:03:04.716 +07:00 [INF] Content root path: D:\API\ProjectWeb2\WebAPIAnimals\ControllerAPI
2024-05-21 08:03:05.562 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:03:05.625 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:03:05.672 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:03:05.687 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:03:05.742 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 181.3058ms
2024-05-21 08:03:05.834 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:03:05.860 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:03:05.860 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:03:05.869 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.9853ms
2024-05-21 08:03:05.911 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.5116ms
2024-05-21 08:03:06.464 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:03:07.772 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1308.6549ms
2024-05-21 08:03:08.349 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:03:08.381 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:03:08.388 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2547.8124ms.
2024-05-21 08:03:08.394 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:03:08.409 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 2715.7838ms
2024-05-21 08:03:08.411 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:03:08.419 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 2794.1966ms
2024-05-21 08:04:44.693 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 807
2024-05-21 08:04:44.699 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:04:44.703 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:44.723 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:44.935 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:04:44.960 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:04:44.962 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 235.7394ms.
2024-05-21 08:04:44.965 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:04:44.967 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 262.4314ms
2024-05-21 08:04:44.969 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:04:44.971 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 277.9456ms
2024-05-21 08:04:45.018 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:04:45.025 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:45.026 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:45.031 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:45.081 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:04:45.085 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:04:45.086 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 54.5509ms.
2024-05-21 08:04:45.088 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:04:45.089 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 60.5468ms
2024-05-21 08:04:45.090 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:45.091 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 72.2825ms
2024-05-21 08:04:47.770 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1016 - null null
2024-05-21 08:04:47.773 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:04:47.775 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:47.777 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:47.811 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:04:47.814 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:04:47.815 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 36.9236ms.
2024-05-21 08:04:47.816 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:04:47.817 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 40.3039ms
2024-05-21 08:04:47.818 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:04:47.819 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1016 - 200 null application/json; charset=utf-8 48.8984ms
2024-05-21 08:04:50.674 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1016 - null null
2024-05-21 08:04:50.678 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:50.680 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:50.681 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:50.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:04:50.725 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:04:50.728 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:04:50.729 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.4977ms.
2024-05-21 08:04:50.730 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:04:50.733 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 52.9424ms
2024-05-21 08:04:50.735 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:50.736 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1016 - 200 null application/json; charset=utf-8 61.2256ms
2024-05-21 08:04:50.778 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:04:50.781 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:50.782 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:50.785 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:50.789 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:04:50.790 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:04:50.791 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.2737ms.
2024-05-21 08:04:50.792 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:04:50.793 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.2153ms
2024-05-21 08:04:50.794 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:50.795 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.7656ms
2024-05-21 08:04:55.680 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:04:55.684 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:55.685 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:55.686 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:55.689 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:04:55.696 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:04:55.714 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:04:55.722 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.8573ms.
2024-05-21 08:04:55.723 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:04:55.724 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 38.1715ms
2024-05-21 08:04:55.726 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:55.726 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 46.357ms
2024-05-21 08:04:55.765 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:04:55.769 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:55.771 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:55.773 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:55.775 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:04:55.776 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:04:55.777 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7332ms.
2024-05-21 08:04:55.778 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:04:55.779 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.8687ms
2024-05-21 08:04:55.780 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:55.781 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.1607ms
2024-05-21 08:04:56.972 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=20 - null null
2024-05-21 08:04:56.975 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:56.976 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:56.978 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:56.981 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:04:56.987 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:04:56.991 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:04:56.992 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.5665ms.
2024-05-21 08:04:56.993 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:04:56.993 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.803ms
2024-05-21 08:04:56.994 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:56.996 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=20 - 200 null application/json; charset=utf-8 23.5673ms
2024-05-21 08:04:57.040 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:04:57.044 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:57.044 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:57.046 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:57.049 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:04:57.050 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:04:57.051 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.4889ms.
2024-05-21 08:04:57.052 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:04:57.053 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.6484ms
2024-05-21 08:04:57.053 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:57.054 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.6752ms
2024-05-21 08:04:58.712 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:04:58.715 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:58.716 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:58.718 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:58.721 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:04:58.723 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:04:58.725 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:04:58.729 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.1122ms.
2024-05-21 08:04:58.730 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:04:58.731 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 13.8077ms
2024-05-21 08:04:58.732 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:58.732 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 20.6066ms
2024-05-21 08:04:58.778 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:04:58.783 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:58.785 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:58.788 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:58.790 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:04:58.791 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:04:58.792 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.4685ms.
2024-05-21 08:04:58.793 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:04:58.794 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.2027ms
2024-05-21 08:04:58.794 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:58.795 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.8447ms
2024-05-21 08:04:59.387 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:04:59.390 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:59.393 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:59.395 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:59.397 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:04:59.400 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:04:59.402 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:04:59.407 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.803ms.
2024-05-21 08:04:59.408 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:04:59.409 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.279ms
2024-05-21 08:04:59.409 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:04:59.410 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 22.7338ms
2024-05-21 08:04:59.452 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:04:59.455 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:59.456 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:04:59.457 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:04:59.459 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:04:59.460 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:04:59.461 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.086ms.
2024-05-21 08:04:59.462 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:04:59.463 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.8865ms
2024-05-21 08:04:59.463 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:04:59.464 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.888ms
2024-05-21 08:05:00.132 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:05:00.136 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:00.138 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:00.139 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:00.142 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:00.144 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:00.146 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:00.152 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.8887ms.
2024-05-21 08:05:00.153 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:00.154 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.9591ms
2024-05-21 08:05:00.155 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:00.155 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 23.3805ms
2024-05-21 08:05:00.202 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:00.204 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:00.204 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:00.206 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:00.208 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:00.209 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:00.210 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.2031ms.
2024-05-21 08:05:00.211 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:00.212 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.2485ms
2024-05-21 08:05:00.213 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:00.213 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.2866ms
2024-05-21 08:05:00.710 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:05:00.712 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:00.713 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:00.714 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:00.716 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:00.719 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:00.721 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:00.726 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.8402ms.
2024-05-21 08:05:00.727 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:00.728 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.0027ms
2024-05-21 08:05:00.728 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:00.729 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 18.765ms
2024-05-21 08:05:00.774 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:00.776 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:00.777 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:00.778 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:00.780 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:00.782 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:00.783 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7797ms.
2024-05-21 08:05:00.785 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:00.786 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.0411ms
2024-05-21 08:05:00.787 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:00.788 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.3436ms
2024-05-21 08:05:01.097 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:05:01.099 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:01.100 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:01.101 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:01.103 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:01.106 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:01.108 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:01.113 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.5056ms.
2024-05-21 08:05:01.115 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:01.115 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.5886ms
2024-05-21 08:05:01.116 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:01.117 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 20.1707ms
2024-05-21 08:05:01.161 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:01.163 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:01.164 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:01.166 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:01.168 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:01.170 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:01.170 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7091ms.
2024-05-21 08:05:01.171 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:01.172 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.9723ms
2024-05-21 08:05:01.173 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:01.174 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.9248ms
2024-05-21 08:05:01.648 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:05:01.650 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:01.650 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:01.653 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:01.655 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:01.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:01.661 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:01.666 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.4121ms.
2024-05-21 08:05:01.668 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:01.669 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 16.7717ms
2024-05-21 08:05:01.670 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:01.671 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 23.3445ms
2024-05-21 08:05:01.723 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:01.726 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:01.727 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:01.728 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:01.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:01.733 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:01.734 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.7435ms.
2024-05-21 08:05:01.735 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:01.736 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.8285ms
2024-05-21 08:05:01.736 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:01.737 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.6845ms
2024-05-21 08:05:02.117 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:05:02.119 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:02.121 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:02.123 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:02.126 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:02.128 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:02.130 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:02.135 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.6768ms.
2024-05-21 08:05:02.137 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:02.138 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.4683ms
2024-05-21 08:05:02.139 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:02.140 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 23.4725ms
2024-05-21 08:05:02.193 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:02.195 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:02.195 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:02.197 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:02.199 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:02.201 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:02.202 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.5793ms.
2024-05-21 08:05:02.203 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:02.204 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.7486ms
2024-05-21 08:05:02.205 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:02.206 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.9502ms
2024-05-21 08:05:02.739 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:05:02.742 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:02.743 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:02.744 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:02.746 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:02.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:02.751 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:02.756 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.2008ms.
2024-05-21 08:05:02.757 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:02.758 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.2416ms
2024-05-21 08:05:02.759 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:02.760 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 20.7346ms
2024-05-21 08:05:02.816 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:02.820 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:02.821 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:02.822 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:02.825 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:02.828 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:02.828 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.8909ms.
2024-05-21 08:05:02.829 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:02.830 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.899ms
2024-05-21 08:05:02.831 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:02.831 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.0856ms
2024-05-21 08:05:03.230 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:05:03.233 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:03.234 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:03.236 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:03.239 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:03.243 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:03.246 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:03.252 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.3808ms.
2024-05-21 08:05:03.253 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:03.254 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 18.6521ms
2024-05-21 08:05:03.255 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:03.256 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 25.2413ms
2024-05-21 08:05:03.315 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:03.318 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:03.318 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:03.320 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:03.322 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:03.323 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:03.324 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.3919ms.
2024-05-21 08:05:03.325 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:03.326 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.2866ms
2024-05-21 08:05:03.326 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:03.327 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.8112ms
2024-05-21 08:05:03.699 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:05:03.701 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:03.702 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:03.703 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:03.706 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:03.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:03.710 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:03.716 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.6256ms.
2024-05-21 08:05:03.718 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:03.719 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.5765ms
2024-05-21 08:05:03.720 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:03.721 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 21.5592ms
2024-05-21 08:05:03.776 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:03.777 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:03.778 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:03.779 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:03.782 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:03.784 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:03.784 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.0942ms.
2024-05-21 08:05:03.786 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:03.787 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.5181ms
2024-05-21 08:05:03.787 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:03.788 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.4942ms
2024-05-21 08:05:04.227 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:05:04.231 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:04.231 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:04.233 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:04.235 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:05:04.237 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:05:04.239 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:05:04.243 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.9302ms.
2024-05-21 08:05:04.244 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:05:04.245 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 12.961ms
2024-05-21 08:05:04.246 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:05:04.247 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 19.5024ms
2024-05-21 08:05:04.288 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:05:04.290 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:04.290 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:05:04.292 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:05:04.294 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:05:04.295 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:05:04.295 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.1112ms.
2024-05-21 08:05:04.296 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:05:04.297 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.776ms
2024-05-21 08:05:04.298 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:05:04.298 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 10.7152ms
2024-05-21 08:06:33.635 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/Get-By-Id?id= - null null
2024-05-21 08:06:33.646 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:06:33.647 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:06:33.659 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-05-21 08:06:33.683 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 34.0218ms
2024-05-21 08:06:33.683 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:06:33.684 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/Get-By-Id?id= - 400 null application/problem+json; charset=utf-8 49.4443ms
2024-05-21 08:06:34.282 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/favicon.ico - null null
2024-05-21 08:06:34.284 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/favicon.ico - 404 0 null 1.9502ms
2024-05-21 08:06:34.286 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7035/favicon.ico, Response status code: 404
2024-05-21 08:06:39.238 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/Get-By-Id?id=0 - null null
2024-05-21 08:06:39.243 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:06:39.245 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:06:39.246 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:06:39.250 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:06:39.251 +07:00 [INF] Animal Page => 
2024-05-21 08:06:39.252 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.6602ms.
2024-05-21 08:06:39.253 +07:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2024-05-21 08:06:39.254 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 7.5558ms
2024-05-21 08:06:39.255 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:06:39.256 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/Get-By-Id?id=0 - 204 null null 17.1045ms
2024-05-21 08:06:49.635 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/GetAll - null null
2024-05-21 08:06:49.640 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:06:49.642 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:06:49.646 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:06:49.649 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:06:49.650 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:06:49.651 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.4958ms.
2024-05-21 08:06:49.651 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:06:49.652 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.5712ms
2024-05-21 08:06:49.653 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:06:49.654 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/GetAll - 200 null application/json; charset=utf-8 19.6937ms
2024-05-21 08:06:54.314 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - null null
2024-05-21 08:06:54.319 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:06:54.320 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:06:54.323 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:06:54.325 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:06:54.326 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:06:54.327 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.0324ms.
2024-05-21 08:06:54.328 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:06:54.329 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 6.6676ms
2024-05-21 08:06:54.330 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:06:54.331 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - 200 null application/json; charset=utf-8 16.8207ms
2024-05-21 08:07:05.380 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/Delete?id= - null null
2024-05-21 08:07:05.385 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2024-05-21 08:07:05.386 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2024-05-21 08:07:05.386 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/Delete?id= - 405 0 null 6.0485ms
2024-05-21 08:07:08.249 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:07:08.256 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2024-05-21 08:07:08.257 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2024-05-21 08:07:08.259 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/Delete?id=2 - 405 0 null 9.6016ms
2024-05-21 08:07:12.817 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/Delete?id=0 - null null
2024-05-21 08:07:12.821 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2024-05-21 08:07:12.823 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2024-05-21 08:07:12.823 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/Delete?id=0 - 405 0 null 6.4921ms
2024-05-21 08:08:00.837 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:08:00.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 13.4119ms
2024-05-21 08:08:00.869 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:08:00.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:08:00.873 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 3.9431ms
2024-05-21 08:08:00.887 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.5902ms
2024-05-21 08:08:01.329 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:08:01.331 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:08:01.333 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:08:01.335 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:08:01.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:08:01.340 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:08:01.340 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.5651ms.
2024-05-21 08:08:01.341 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:08:01.344 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.087ms
2024-05-21 08:08:01.345 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:08:01.345 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.7509ms
2024-05-21 08:08:01.747 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:08:01.765 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.3594ms
2024-05-21 08:08:03.326 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:08:03.333 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:08:03.336 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:08:03.339 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:08:03.343 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:08:03.350 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:08:03.354 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:08:03.360 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.6173ms.
2024-05-21 08:08:03.362 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:08:03.363 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 23.8337ms
2024-05-21 08:08:03.363 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:08:03.364 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 37.8199ms
2024-05-21 08:08:14.765 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 173
2024-05-21 08:08:14.769 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:08:14.770 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:08:14.773 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:08:14.778 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:08:14.781 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:08:14.782 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.1508ms.
2024-05-21 08:08:14.783 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:08:14.784 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 12.8605ms
2024-05-21 08:08:14.785 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:08:14.786 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 20.8645ms
2024-05-21 08:08:14.827 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:08:14.830 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:08:14.831 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:08:14.832 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:08:14.833 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:08:14.835 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:08:14.835 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.4376ms.
2024-05-21 08:08:14.836 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:08:14.837 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.7847ms
2024-05-21 08:08:14.838 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:08:14.840 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.1902ms
2024-05-21 08:08:16.326 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1017 - null null
2024-05-21 08:08:16.329 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:08:16.329 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:08:16.331 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:08:16.332 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:08:16.336 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:08:16.337 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:08:16.338 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.5693ms.
2024-05-21 08:08:16.339 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:08:16.341 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 11.0303ms
2024-05-21 08:08:16.342 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:08:16.343 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1017 - 200 null application/json; charset=utf-8 17.5413ms
2024-05-21 08:08:17.419 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - null null
2024-05-21 08:08:17.423 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:08:17.426 +07:00 [INF] Route matched with {action = "Get", controller = "AC"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult Get() on controller ControllerAPI.Controllers.ACController (ControllerAPI).
2024-05-21 08:08:17.428 +07:00 [INF] Executing action method ControllerAPI.Controllers.ACController.Get (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:08:17.481 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a0].[Name] AS [Animal_Name], [c].[Name] AS [Category_Name]
FROM [AnimalCategories] AS [a]
LEFT JOIN [Animals] AS [a0] ON [a].[Animal_Id] = [a0].[Id]
LEFT JOIN [Categories] AS [c] ON [a].[Category_Id] = [c].[Id]
2024-05-21 08:08:17.484 +07:00 [INF] Executed action method ControllerAPI.Controllers.ACController.Get (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 55.3759ms.
2024-05-21 08:08:17.485 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Warehouse.ACDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:08:17.487 +07:00 [INF] Executed action ControllerAPI.Controllers.ACController.Get (ControllerAPI) in 59.1606ms
2024-05-21 08:08:17.489 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:08:17.489 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - 200 null application/json; charset=utf-8 70.4001ms
2024-05-21 08:08:18.939 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:08:18.942 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:08:18.944 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:08:18.945 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:08:18.948 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:08:18.950 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:08:18.952 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.7738ms.
2024-05-21 08:08:18.953 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:08:18.954 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.7172ms
2024-05-21 08:08:18.955 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:08:18.956 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.2076ms
2024-05-21 08:09:00.305 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:09:00.322 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 17.4661ms
2024-05-21 08:09:00.345 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:09:00.345 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:09:00.348 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 3.2283ms
2024-05-21 08:09:00.354 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.1638ms
2024-05-21 08:09:00.593 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:09:00.595 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:09:00.597 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:00.599 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:00.603 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:09:00.605 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:09:00.605 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.0559ms.
2024-05-21 08:09:00.606 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:09:00.608 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.4799ms
2024-05-21 08:09:00.609 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:09:00.610 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 17.1649ms
2024-05-21 08:09:01.623 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:09:01.630 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.979ms
2024-05-21 08:09:02.142 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:09:02.146 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:09:02.150 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:02.155 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:02.159 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:09:02.165 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:09:02.167 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:09:02.176 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 20.2307ms.
2024-05-21 08:09:02.177 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:09:02.178 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 23.8466ms
2024-05-21 08:09:02.179 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:09:02.179 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 37.5882ms
2024-05-21 08:09:04.837 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:09:04.839 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:09:04.840 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:04.841 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:04.843 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:09:04.845 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:09:04.847 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:09:04.851 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.7589ms.
2024-05-21 08:09:04.853 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:09:04.854 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 13.1781ms
2024-05-21 08:09:04.855 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:09:04.855 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 18.2156ms
2024-05-21 08:09:28.025 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 57
2024-05-21 08:09:28.029 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:09:28.031 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:28.034 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:28.037 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:09:28.039 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:09:28.039 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.0394ms.
2024-05-21 08:09:28.040 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:09:28.042 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 9.5969ms
2024-05-21 08:09:28.043 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:09:28.044 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 18.2077ms
2024-05-21 08:09:28.088 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:09:28.091 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:09:28.092 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:28.094 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:28.096 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:09:28.098 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:09:28.099 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.9165ms.
2024-05-21 08:09:28.100 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:09:28.101 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.8676ms
2024-05-21 08:09:28.102 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:09:28.103 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.4419ms
2024-05-21 08:09:31.130 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1018 - null null
2024-05-21 08:09:31.135 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:09:31.137 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:31.139 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:31.141 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:09:31.142 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:09:31.143 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.2477ms.
2024-05-21 08:09:31.144 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:09:31.144 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 5.9927ms
2024-05-21 08:09:31.145 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:09:31.146 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1018 - 200 null application/json; charset=utf-8 16.088ms
2024-05-21 08:09:31.169 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=0 - null null
2024-05-21 08:09:31.171 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:09:31.172 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:31.173 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:31.175 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:09:31.176 +07:00 [INF] Animal Page => 
2024-05-21 08:09:31.177 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.19ms.
2024-05-21 08:09:31.178 +07:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2024-05-21 08:09:31.180 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 7.4595ms
2024-05-21 08:09:31.181 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:09:31.182 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=0 - 204 null null 13.0026ms
2024-05-21 08:09:32.563 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1018 - null null
2024-05-21 08:09:32.566 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:09:32.567 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:32.569 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:32.570 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:09:32.574 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:09:32.575 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:09:32.576 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.4457ms.
2024-05-21 08:09:32.577 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:09:32.579 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 10.9615ms
2024-05-21 08:09:32.580 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:09:32.582 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1018 - 200 null application/json; charset=utf-8 19.1402ms
2024-05-21 08:09:35.092 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:09:35.095 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:09:35.095 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:35.097 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:35.100 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:09:35.102 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:09:35.103 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.1838ms.
2024-05-21 08:09:35.104 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:09:35.105 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.404ms
2024-05-21 08:09:35.105 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:09:35.106 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.8787ms
2024-05-21 08:09:36.523 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:09:36.525 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:09:36.526 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:09:36.527 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:09:36.529 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:09:36.530 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:09:36.530 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.7501ms.
2024-05-21 08:09:36.532 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:09:36.533 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.5326ms
2024-05-21 08:09:36.534 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:09:36.535 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.0156ms
2024-05-21 08:14:34.853 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:14:34.865 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 11.6454ms
2024-05-21 08:14:34.887 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:14:34.887 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:14:34.893 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.9178ms
2024-05-21 08:14:34.895 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8583ms
2024-05-21 08:14:35.102 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:35.104 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:35.107 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:35.112 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:35.116 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:35.118 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:35.119 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.9727ms.
2024-05-21 08:14:35.120 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:35.122 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 11.5037ms
2024-05-21 08:14:35.124 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:35.124 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 22.6054ms
2024-05-21 08:14:36.347 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:14:36.352 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 4.6445ms
2024-05-21 08:14:37.593 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:14:37.599 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:37.601 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:37.602 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:37.605 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:37.609 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:37.612 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:37.617 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.0546ms.
2024-05-21 08:14:37.618 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:37.619 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 17.24ms
2024-05-21 08:14:37.620 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:37.621 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 27.9145ms
2024-05-21 08:14:37.661 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:37.664 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:37.664 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:37.666 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:37.668 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:37.669 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:37.669 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.9285ms.
2024-05-21 08:14:37.670 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:37.671 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.6396ms
2024-05-21 08:14:37.672 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:37.673 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.8218ms
2024-05-21 08:14:39.186 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:39.189 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:39.190 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:39.191 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:39.194 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:39.197 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:39.199 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:39.204 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.5673ms.
2024-05-21 08:14:39.205 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:39.206 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.4418ms
2024-05-21 08:14:39.206 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:39.207 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 21.1367ms
2024-05-21 08:14:39.255 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:39.257 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:39.258 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:39.260 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:39.262 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:39.263 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:39.264 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.0564ms.
2024-05-21 08:14:39.265 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:39.266 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.3019ms
2024-05-21 08:14:39.267 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:39.268 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.4412ms
2024-05-21 08:14:39.787 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:39.789 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:39.789 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:39.790 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:39.792 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:39.796 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:39.798 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:39.802 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.9563ms.
2024-05-21 08:14:39.803 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:39.804 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 13.6585ms
2024-05-21 08:14:39.805 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:39.805 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 18.6506ms
2024-05-21 08:14:39.850 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:39.854 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:39.854 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:39.856 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:39.859 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:39.860 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:39.861 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.8381ms.
2024-05-21 08:14:39.862 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:39.863 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.3355ms
2024-05-21 08:14:39.864 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:39.865 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.5861ms
2024-05-21 08:14:40.584 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:40.588 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:40.589 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:40.590 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:40.592 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:40.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:40.596 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:40.602 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.7616ms.
2024-05-21 08:14:40.603 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:40.604 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 13.7681ms
2024-05-21 08:14:40.605 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:40.605 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 21.2057ms
2024-05-21 08:14:40.645 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:40.648 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:40.649 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:40.650 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:40.652 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:40.654 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:40.654 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.1688ms.
2024-05-21 08:14:40.655 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:40.656 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.1293ms
2024-05-21 08:14:40.657 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:40.658 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.0965ms
2024-05-21 08:14:41.094 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:41.098 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:41.099 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:41.100 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:41.102 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:41.105 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:41.106 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:41.112 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.9268ms.
2024-05-21 08:14:41.113 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:41.114 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.1673ms
2024-05-21 08:14:41.115 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:41.116 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 22.2315ms
2024-05-21 08:14:41.166 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:41.170 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:41.170 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:41.172 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:41.173 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:41.175 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:41.175 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.0293ms.
2024-05-21 08:14:41.177 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:41.178 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.5249ms
2024-05-21 08:14:41.179 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:41.180 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.6003ms
2024-05-21 08:14:41.706 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:41.708 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:41.709 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:41.711 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:41.712 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:41.714 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:41.716 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:41.721 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.2805ms.
2024-05-21 08:14:41.722 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:41.722 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 12.1545ms
2024-05-21 08:14:41.723 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:41.724 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 18.0777ms
2024-05-21 08:14:41.774 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:41.776 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:41.778 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:41.780 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:41.782 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:41.784 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:41.784 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.8391ms.
2024-05-21 08:14:41.786 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:41.786 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.0369ms
2024-05-21 08:14:41.788 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:41.789 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.468ms
2024-05-21 08:14:42.408 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:42.411 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:42.412 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:42.414 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:42.416 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:42.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:42.420 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:42.426 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.829ms.
2024-05-21 08:14:42.428 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:42.429 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.2628ms
2024-05-21 08:14:42.430 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:42.431 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 22.9172ms
2024-05-21 08:14:42.472 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:42.475 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:42.475 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:42.478 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:42.480 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:42.482 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:42.482 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.6253ms.
2024-05-21 08:14:42.483 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:42.484 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.442ms
2024-05-21 08:14:42.485 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:42.486 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.8729ms
2024-05-21 08:14:42.847 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:42.849 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:42.850 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:42.852 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:42.854 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:42.857 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:42.860 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:42.867 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.0717ms.
2024-05-21 08:14:42.868 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:42.870 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 18.0463ms
2024-05-21 08:14:42.870 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:42.871 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 24.1759ms
2024-05-21 08:14:42.980 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:42.982 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:42.982 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:42.983 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:42.985 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:42.987 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:42.989 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:42.994 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.9962ms.
2024-05-21 08:14:42.995 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:42.996 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 12.7657ms
2024-05-21 08:14:42.997 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:42.998 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 17.6315ms
2024-05-21 08:14:43.093 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:43.095 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:43.096 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:43.098 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:43.099 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:43.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:43.105 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:43.110 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.4869ms.
2024-05-21 08:14:43.111 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:43.112 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.5365ms
2024-05-21 08:14:43.113 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:43.114 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 20.3532ms
2024-05-21 08:14:43.161 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:43.162 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:43.163 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:43.164 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:43.169 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:43.172 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:43.174 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:43.179 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.2432ms.
2024-05-21 08:14:43.180 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:43.181 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 16.9121ms
2024-05-21 08:14:43.182 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:43.183 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 21.6405ms
2024-05-21 08:14:43.221 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:43.222 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:43.223 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:43.224 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:43.227 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:43.228 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:43.229 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.2945ms.
2024-05-21 08:14:43.230 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:43.231 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.2638ms
2024-05-21 08:14:43.231 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:43.232 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.1364ms
2024-05-21 08:14:43.477 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:43.481 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:43.481 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:43.482 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:43.484 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:43.486 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:43.489 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:43.496 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.1535ms.
2024-05-21 08:14:43.498 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:43.498 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 16.2982ms
2024-05-21 08:14:43.499 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:43.500 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 23.4775ms
2024-05-21 08:14:43.553 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:43.556 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:43.556 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:43.559 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:43.561 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:43.562 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:43.563 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.1597ms.
2024-05-21 08:14:43.564 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:43.565 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.5048ms
2024-05-21 08:14:43.566 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:43.567 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.3151ms
2024-05-21 08:14:43.911 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:43.915 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:43.916 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:43.917 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:43.919 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:43.921 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:43.922 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:43.929 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.0893ms.
2024-05-21 08:14:43.930 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:43.930 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 13.7181ms
2024-05-21 08:14:43.931 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:43.932 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 20.4424ms
2024-05-21 08:14:44.030 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:44.033 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:44.034 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:44.035 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:44.037 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:44.039 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:44.041 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:44.047 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.4309ms.
2024-05-21 08:14:44.049 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:44.049 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.1168ms
2024-05-21 08:14:44.050 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:44.051 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 20.7804ms
2024-05-21 08:14:44.135 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:44.138 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:44.138 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:44.139 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:44.141 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:44.143 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:44.145 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:44.149 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.5022ms.
2024-05-21 08:14:44.150 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:44.151 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 11.7194ms
2024-05-21 08:14:44.152 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:44.153 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 17.5411ms
2024-05-21 08:14:44.199 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:44.202 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:44.202 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:44.204 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:44.206 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:44.208 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:44.208 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.3326ms.
2024-05-21 08:14:44.210 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:44.211 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.0152ms
2024-05-21 08:14:44.212 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:44.213 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.5593ms
2024-05-21 08:14:46.051 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:14:46.055 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:46.055 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:46.057 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:46.059 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:14:46.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:14:46.064 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:14:46.069 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.6274ms.
2024-05-21 08:14:46.070 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:14:46.071 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 13.9459ms
2024-05-21 08:14:46.071 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:14:46.072 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 21.6012ms
2024-05-21 08:14:46.117 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:14:46.118 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:46.119 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:14:46.120 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:46.122 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:14:46.124 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:14:46.124 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.2887ms.
2024-05-21 08:14:46.125 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:46.126 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.3721ms
2024-05-21 08:14:46.127 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:14:46.128 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.5301ms
2024-05-21 08:14:50.859 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/AC/Get-All - null null
2024-05-21 08:14:50.863 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:14:50.864 +07:00 [INF] Route matched with {action = "Get", controller = "AC"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult Get() on controller ControllerAPI.Controllers.ACController (ControllerAPI).
2024-05-21 08:14:50.869 +07:00 [INF] Executing action method ControllerAPI.Controllers.ACController.Get (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:50.872 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a0].[Name] AS [Animal_Name], [c].[Name] AS [Category_Name]
FROM [AnimalCategories] AS [a]
LEFT JOIN [Animals] AS [a0] ON [a].[Animal_Id] = [a0].[Id]
LEFT JOIN [Categories] AS [c] ON [a].[Category_Id] = [c].[Id]
2024-05-21 08:14:50.873 +07:00 [INF] Executed action method ControllerAPI.Controllers.ACController.Get (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.497ms.
2024-05-21 08:14:50.874 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Warehouse.ACDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:50.877 +07:00 [INF] Executed action ControllerAPI.Controllers.ACController.Get (ControllerAPI) in 8.2616ms
2024-05-21 08:14:50.878 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:14:50.879 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/AC/Get-All - 200 null application/json; charset=utf-8 20.5602ms
2024-05-21 08:14:54.158 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - null null
2024-05-21 08:14:54.163 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:14:54.164 +07:00 [INF] Route matched with {action = "Get", controller = "AC"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult Get() on controller ControllerAPI.Controllers.ACController (ControllerAPI).
2024-05-21 08:14:54.166 +07:00 [INF] Executing action method ControllerAPI.Controllers.ACController.Get (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:14:54.167 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a0].[Name] AS [Animal_Name], [c].[Name] AS [Category_Name]
FROM [AnimalCategories] AS [a]
LEFT JOIN [Animals] AS [a0] ON [a].[Animal_Id] = [a0].[Id]
LEFT JOIN [Categories] AS [c] ON [a].[Category_Id] = [c].[Id]
2024-05-21 08:14:54.169 +07:00 [INF] Executed action method ControllerAPI.Controllers.ACController.Get (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.1192ms.
2024-05-21 08:14:54.170 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Warehouse.ACDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:14:54.171 +07:00 [INF] Executed action ControllerAPI.Controllers.ACController.Get (ControllerAPI) in 5.7892ms
2024-05-21 08:14:54.172 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:14:54.173 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - 200 null application/json; charset=utf-8 14.5027ms
2024-05-21 08:15:00.171 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:15:00.174 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:15:00.175 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:15:00.176 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:15:00.178 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:15:00.179 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:15:00.180 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.8127ms.
2024-05-21 08:15:00.181 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:15:00.182 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.856ms
2024-05-21 08:15:00.182 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:15:00.183 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.1107ms
2024-05-21 08:15:01.173 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:15:01.175 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:15:01.176 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:15:01.178 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:15:01.179 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:15:01.181 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:15:01.182 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:06d0ab88-7e6c-447e-a148-4bc7391b16d4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:15:01.186 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.696ms.
2024-05-21 08:15:01.187 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:15:01.188 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 10.6075ms
2024-05-21 08:15:01.189 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:15:01.189 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 16.0676ms
2024-05-21 08:15:01.235 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:15:01.236 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:15:01.237 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:15:01.238 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:15:01.241 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:15:01.243 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:15:01.244 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.1319ms.
2024-05-21 08:15:01.245 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:15:01.246 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.3339ms
2024-05-21 08:15:01.247 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:15:01.248 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.6546ms
2024-05-21 08:30:03.827 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-21 08:30:04.047 +07:00 [INF] Now listening on: https://localhost:7035
2024-05-21 08:30:04.048 +07:00 [INF] Now listening on: http://localhost:5287
2024-05-21 08:30:04.049 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-21 08:30:04.050 +07:00 [INF] Hosting environment: Development
2024-05-21 08:30:04.051 +07:00 [INF] Content root path: D:\API\ProjectWeb2\WebAPIAnimals\ControllerAPI
2024-05-21 08:30:04.420 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:30:04.637 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 217.7682ms
2024-05-21 08:30:04.734 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:30:04.734 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:30:04.746 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.3587ms
2024-05-21 08:30:04.779 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.8878ms
2024-05-21 08:30:05.512 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:30:05.547 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:30:05.562 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:30:05.650 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:30:05.712 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:30:05.799 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 148.7163ms
2024-05-21 08:30:06.997 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:30:07.031 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:30:07.039 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1319.4935ms.
2024-05-21 08:30:07.046 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:30:07.062 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 1496.2317ms
2024-05-21 08:30:07.064 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:30:07.073 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 1560.9263ms
2024-05-21 08:30:27.139 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:30:27.144 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:30:27.147 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:30:27.149 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:30:27.233 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:30:27.352 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:30:27.382 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:30:27.391 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 241.0799ms.
2024-05-21 08:30:27.394 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:30:27.396 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 248.5597ms
2024-05-21 08:30:27.398 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:30:27.399 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 259.7006ms
2024-05-21 08:30:48.054 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:30:48.060 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:30:48.062 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:30:48.066 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:30:48.134 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:30:48.143 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:30:48.145 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:30:48.152 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 85.0974ms.
2024-05-21 08:30:48.154 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:30:48.155 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 91.9499ms
2024-05-21 08:30:48.156 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:30:48.157 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 103.6468ms
2024-05-21 08:31:23.842 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:31:23.857 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 14.8061ms
2024-05-21 08:31:23.878 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:31:23.878 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:31:23.883 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.8065ms
2024-05-21 08:31:23.895 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.0434ms
2024-05-21 08:31:24.387 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:31:24.388 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:24.391 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:24.392 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:24.398 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:31:24.400 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:31:24.401 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.2115ms.
2024-05-21 08:31:24.402 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:31:24.405 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 13.5877ms
2024-05-21 08:31:24.407 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:24.408 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 20.9593ms
2024-05-21 08:31:25.103 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:31:25.112 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.2623ms
2024-05-21 08:31:27.004 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:31:27.008 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:27.010 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:27.013 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:27.019 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:31:27.026 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:31:27.029 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:31:27.038 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.9549ms.
2024-05-21 08:31:27.039 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:31:27.041 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 28.1413ms
2024-05-21 08:31:27.042 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:27.043 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 39.0033ms
2024-05-21 08:31:27.091 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:31:27.093 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:27.093 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:27.095 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:27.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:31:27.101 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:31:27.102 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.2552ms.
2024-05-21 08:31:27.104 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:31:27.105 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 10.4845ms
2024-05-21 08:31:27.106 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:27.107 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.3281ms
2024-05-21 08:31:28.228 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:31:28.232 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:28.237 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:28.240 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:28.242 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:31:28.262 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:31:28.265 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:31:28.274 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.5339ms.
2024-05-21 08:31:28.287 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:31:28.289 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 49.5636ms
2024-05-21 08:31:28.289 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:28.290 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 61.9409ms
2024-05-21 08:31:28.342 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:31:28.344 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:28.345 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:28.346 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:28.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:31:28.351 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:31:28.352 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.757ms.
2024-05-21 08:31:28.354 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:31:28.355 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.6726ms
2024-05-21 08:31:28.356 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:28.356 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.524ms
2024-05-21 08:31:28.635 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:31:28.638 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:28.639 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:28.641 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:28.645 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:31:28.650 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:31:28.653 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:31:28.662 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.9807ms.
2024-05-21 08:31:28.664 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:31:28.665 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 23.9602ms
2024-05-21 08:31:28.666 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:28.667 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 31.9082ms
2024-05-21 08:31:28.728 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:31:28.731 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:28.732 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:28.733 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:28.736 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:31:28.737 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:31:28.738 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.2523ms.
2024-05-21 08:31:28.740 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:31:28.741 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.4956ms
2024-05-21 08:31:28.743 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:28.744 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.7042ms
2024-05-21 08:31:29.004 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:31:29.006 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:29.007 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:29.009 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:29.011 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:31:29.015 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:31:29.017 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:31:29.024 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.4645ms.
2024-05-21 08:31:29.026 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:31:29.027 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 17.9069ms
2024-05-21 08:31:29.027 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:29.028 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 24.5611ms
2024-05-21 08:31:29.084 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:31:29.087 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:29.088 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:29.090 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:29.094 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:31:29.095 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:31:29.097 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.4839ms.
2024-05-21 08:31:29.098 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:31:29.100 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 10.5607ms
2024-05-21 08:31:29.101 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:29.102 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 17.8838ms
2024-05-21 08:31:29.963 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:31:29.966 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:29.967 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:29.968 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:29.970 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:31:29.973 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:31:29.977 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:31:29.983 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.5418ms.
2024-05-21 08:31:29.984 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:31:29.985 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 17.1242ms
2024-05-21 08:31:29.987 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:29.988 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 24.1609ms
2024-05-21 08:31:30.033 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:31:30.035 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:30.037 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:30.039 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:30.042 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:31:30.044 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:31:30.044 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.0731ms.
2024-05-21 08:31:30.046 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:31:30.048 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.3025ms
2024-05-21 08:31:30.049 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:30.049 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.364ms
2024-05-21 08:31:30.810 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:31:30.813 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:30.815 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:30.819 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:30.821 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:31:30.824 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:31:30.826 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:31:30.835 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.018ms.
2024-05-21 08:31:30.836 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:31:30.837 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 18.674ms
2024-05-21 08:31:30.838 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:30.838 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 27.9826ms
2024-05-21 08:31:30.888 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:31:30.892 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:30.893 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:30.895 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:30.898 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:31:30.899 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:31:30.900 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.9056ms.
2024-05-21 08:31:30.901 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:31:30.902 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.4741ms
2024-05-21 08:31:30.903 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:30.904 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.4397ms
2024-05-21 08:31:31.476 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:31:31.480 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:31.482 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:31.484 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:31.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:31:31.490 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:31:31.493 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:31:31.499 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.2363ms.
2024-05-21 08:31:31.501 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:31:31.503 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 19.1825ms
2024-05-21 08:31:31.504 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:31:31.505 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 28.876ms
2024-05-21 08:31:31.569 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:31:31.572 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:31.573 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:31:31.575 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:31:31.579 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:31:31.582 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:31:31.583 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.7238ms.
2024-05-21 08:31:31.584 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:31:31.586 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 11.2077ms
2024-05-21 08:31:31.587 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:31:31.588 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 18.9265ms
2024-05-21 08:32:32.888 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:32:32.906 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 18.2822ms
2024-05-21 08:32:32.927 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:32:32.927 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:32:32.932 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.9266ms
2024-05-21 08:32:32.934 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.4534ms
2024-05-21 08:32:33.160 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:32:33.161 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:33.163 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:33.165 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:33.168 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:32:33.170 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:32:33.171 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.2441ms.
2024-05-21 08:32:33.172 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:32:33.176 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 11.3183ms
2024-05-21 08:32:33.177 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:33.177 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 17.527ms
2024-05-21 08:32:34.104 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:32:34.110 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 5.6448ms
2024-05-21 08:32:34.518 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:32:34.524 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:32:34.528 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:34.531 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:34.535 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:32:34.541 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:32:34.544 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:32:34.550 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.9099ms.
2024-05-21 08:32:34.553 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:32:34.554 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 23.8807ms
2024-05-21 08:32:34.555 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:32:34.556 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 37.523ms
2024-05-21 08:32:34.603 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:32:34.605 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:34.606 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:34.607 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:34.610 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:32:34.612 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:32:34.612 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.2852ms.
2024-05-21 08:32:34.614 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:32:34.615 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.874ms
2024-05-21 08:32:34.616 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:34.617 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.6559ms
2024-05-21 08:32:36.373 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:32:36.376 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:32:36.376 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:36.378 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:36.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:32:36.385 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:32:36.387 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:32:36.395 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.945ms.
2024-05-21 08:32:36.397 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:32:36.398 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 20.3788ms
2024-05-21 08:32:36.399 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:32:36.401 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 28.1181ms
2024-05-21 08:32:36.461 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:32:36.463 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:36.464 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:36.465 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:36.468 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:32:36.470 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:32:36.471 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.952ms.
2024-05-21 08:32:36.472 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:32:36.473 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.3438ms
2024-05-21 08:32:36.474 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:36.475 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.6317ms
2024-05-21 08:32:36.968 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:32:36.970 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:32:36.971 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:36.973 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:36.976 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:32:36.979 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:32:36.981 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:32:36.986 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.3837ms.
2024-05-21 08:32:36.987 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:32:36.989 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.5498ms
2024-05-21 08:32:36.990 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:32:36.991 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 23.1663ms
2024-05-21 08:32:37.032 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:32:37.034 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:37.034 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:37.036 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:37.039 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:32:37.041 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:32:37.041 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7296ms.
2024-05-21 08:32:37.042 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:32:37.043 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.9004ms
2024-05-21 08:32:37.044 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:37.045 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.5813ms
2024-05-21 08:32:56.065 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:32:56.080 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 15.314ms
2024-05-21 08:32:56.106 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:32:56.106 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:32:56.111 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.3166ms
2024-05-21 08:32:56.115 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.8647ms
2024-05-21 08:32:56.270 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:32:56.272 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:56.274 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:56.276 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:56.278 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:32:56.280 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:32:56.281 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.8051ms.
2024-05-21 08:32:56.282 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:32:56.285 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.246ms
2024-05-21 08:32:56.286 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:32:56.287 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.9912ms
2024-05-21 08:32:57.315 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:32:57.322 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.7761ms
2024-05-21 08:32:58.425 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:32:58.430 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:32:58.434 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:32:58.438 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:32:58.441 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:32:58.444 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:32:58.447 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:32:58.457 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.8727ms.
2024-05-21 08:32:58.459 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:32:58.461 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 23.2351ms
2024-05-21 08:32:58.462 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:32:58.464 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 38.0667ms
2024-05-21 08:33:00.899 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:33:00.902 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:33:00.903 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:33:00.904 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:33:00.908 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:33:00.913 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:33:00.915 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:8843fdc5-e40e-4433-8e59-106b8376ce44
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:33:00.921 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.2637ms.
2024-05-21 08:33:00.922 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:33:00.923 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 18.8392ms
2024-05-21 08:33:00.924 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:33:00.925 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 25.7382ms
2024-05-21 08:33:07.284 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 58
2024-05-21 08:33:07.287 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:33:07.288 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:33:07.305 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:33:07.341 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:33:07.361 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:33:07.362 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 55.2187ms.
2024-05-21 08:33:07.363 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:33:07.365 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 75.3412ms
2024-05-21 08:33:07.367 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:33:07.369 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 85.0862ms
2024-05-21 08:33:07.412 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:33:07.415 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:33:07.416 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:33:07.418 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:33:07.423 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:33:07.424 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:33:07.425 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.1103ms.
2024-05-21 08:33:07.426 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:33:07.427 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.8244ms
2024-05-21 08:33:07.427 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:33:07.429 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.1894ms
2024-05-21 08:33:08.885 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1019 - null null
2024-05-21 08:33:08.888 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:33:08.890 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:33:08.892 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:33:08.899 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:33:08.902 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:33:08.903 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.9253ms.
2024-05-21 08:33:08.904 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:33:08.905 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 13.1655ms
2024-05-21 08:33:08.906 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:33:08.907 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1019 - 200 null application/json; charset=utf-8 21.995ms
2024-05-21 08:33:08.930 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1 - null null
2024-05-21 08:33:08.932 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:33:08.933 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:33:08.935 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:33:08.938 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:33:08.939 +07:00 [INF] Animal Page => 
2024-05-21 08:33:08.939 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.3552ms.
2024-05-21 08:33:08.940 +07:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2024-05-21 08:33:08.941 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 6.7982ms
2024-05-21 08:33:08.942 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:33:08.943 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1 - 204 null null 12.8414ms
2024-05-21 08:33:10.731 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1019 - null null
2024-05-21 08:33:10.733 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:33:10.735 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:33:10.737 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:33:10.740 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:33:10.744 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:33:10.747 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:33:10.748 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.0908ms.
2024-05-21 08:33:10.748 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:33:10.753 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 16.4577ms
2024-05-21 08:33:10.754 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:33:10.755 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1019 - 200 null application/json; charset=utf-8 24.6128ms
2024-05-21 08:33:12.982 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:33:12.986 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:33:12.988 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:33:12.991 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:33:12.993 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:33:12.995 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:33:12.996 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.6742ms.
2024-05-21 08:33:12.998 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:33:13.000 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.233ms
2024-05-21 08:33:13.002 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:33:13.003 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 20.6765ms
2024-05-21 08:43:49.438 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:43:49.449 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 11.2891ms
2024-05-21 08:43:49.473 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:43:49.473 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:43:49.475 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 2.5203ms
2024-05-21 08:43:49.482 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8.9557ms
2024-05-21 08:43:50.827 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:43:50.835 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.7775ms
2024-05-21 08:48:13.464 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-21 08:48:13.689 +07:00 [INF] Now listening on: https://localhost:7035
2024-05-21 08:48:13.691 +07:00 [INF] Now listening on: http://localhost:5287
2024-05-21 08:48:13.693 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-21 08:48:13.695 +07:00 [INF] Hosting environment: Development
2024-05-21 08:48:13.696 +07:00 [INF] Content root path: D:\API\ProjectWeb2\WebAPIAnimals\ControllerAPI
2024-05-21 08:48:13.882 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:48:14.169 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 288.6292ms
2024-05-21 08:48:14.333 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:48:14.333 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:48:14.345 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.9456ms
2024-05-21 08:48:14.379 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.3171ms
2024-05-21 08:48:15.784 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:48:15.907 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 122.4702ms
2024-05-21 08:48:25.140 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1019 - null null
2024-05-21 08:48:25.189 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:25.214 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:25.418 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:27.044 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:27.069 +07:00 [INF] Animal Page => 
2024-05-21 08:48:27.075 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1651.6215ms.
2024-05-21 08:48:27.083 +07:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2024-05-21 08:48:27.087 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 1867.6363ms
2024-05-21 08:48:27.089 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:27.099 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1019 - 204 null null 1958.6978ms
2024-05-21 08:48:27.186 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:27.191 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:27.194 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:27.197 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:27.237 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:27.250 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:27.251 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 53.4139ms.
2024-05-21 08:48:27.254 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:27.270 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 74.2577ms
2024-05-21 08:48:27.271 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:27.273 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 86.5927ms
2024-05-21 08:48:28.911 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:48:28.915 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:28.917 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:28.921 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:28.970 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:29.089 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:29.109 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:29.119 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 196.4397ms.
2024-05-21 08:48:29.120 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:29.122 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 202.1711ms
2024-05-21 08:48:29.123 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:29.124 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 212.6719ms
2024-05-21 08:48:29.173 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:29.175 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:29.176 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:29.177 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:29.182 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:29.183 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:29.184 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.5729ms.
2024-05-21 08:48:29.185 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:29.186 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.5768ms
2024-05-21 08:48:29.188 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:29.188 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.1365ms
2024-05-21 08:48:30.268 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:48:30.270 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:30.271 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:30.273 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:30.275 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:30.278 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:30.280 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:30.290 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.2883ms.
2024-05-21 08:48:30.291 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:30.292 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 19.9573ms
2024-05-21 08:48:30.293 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:30.294 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 26.3291ms
2024-05-21 08:48:30.341 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:30.343 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:30.344 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:30.347 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:30.350 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:30.351 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:30.352 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.1623ms.
2024-05-21 08:48:30.353 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:30.354 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.7525ms
2024-05-21 08:48:30.355 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:30.356 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.6042ms
2024-05-21 08:48:30.945 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:48:30.948 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:30.949 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:30.951 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:30.954 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:30.956 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:30.958 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:30.963 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.1487ms.
2024-05-21 08:48:30.965 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:30.966 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.3814ms
2024-05-21 08:48:30.968 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:30.969 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 23.7344ms
2024-05-21 08:48:31.010 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:31.012 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:31.013 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:31.015 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:31.018 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:31.020 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:31.020 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.4247ms.
2024-05-21 08:48:31.021 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:31.023 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.9776ms
2024-05-21 08:48:31.024 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:31.024 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.2497ms
2024-05-21 08:48:31.686 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:48:31.689 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:31.690 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:31.692 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:31.695 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:31.698 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:31.701 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:31.710 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.1619ms.
2024-05-21 08:48:31.711 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:31.712 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 20.4745ms
2024-05-21 08:48:31.713 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:31.713 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 27.3232ms
2024-05-21 08:48:31.765 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:31.767 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:31.768 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:31.769 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:31.772 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:31.774 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:31.774 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.998ms.
2024-05-21 08:48:31.775 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:31.777 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.5911ms
2024-05-21 08:48:31.778 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:31.778 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.5992ms
2024-05-21 08:48:32.054 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:48:32.056 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:32.057 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:32.059 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:32.062 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:32.067 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:32.070 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:32.076 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.3798ms.
2024-05-21 08:48:32.077 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:32.078 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 19.594ms
2024-05-21 08:48:32.079 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:32.081 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 26.9294ms
2024-05-21 08:48:32.146 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:32.149 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:32.150 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:32.153 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:32.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:32.159 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:32.160 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.8969ms.
2024-05-21 08:48:32.162 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:32.163 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 11.208ms
2024-05-21 08:48:32.165 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:32.166 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 20.3384ms
2024-05-21 08:48:32.648 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:48:32.651 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:32.652 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:32.655 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:32.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:32.662 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:32.664 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:32.672 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.6531ms.
2024-05-21 08:48:32.673 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:32.674 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 19.6915ms
2024-05-21 08:48:32.675 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:32.677 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 29.1727ms
2024-05-21 08:48:32.726 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:32.728 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:32.729 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:32.731 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:32.734 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:32.735 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:32.736 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.4359ms.
2024-05-21 08:48:32.737 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:32.739 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.6869ms
2024-05-21 08:48:32.740 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:32.741 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.7597ms
2024-05-21 08:48:33.005 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:48:33.008 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:33.009 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:33.012 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:33.014 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:33.019 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:33.021 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:33.028 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.8313ms.
2024-05-21 08:48:33.029 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:33.030 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 18.3813ms
2024-05-21 08:48:33.031 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:33.032 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 27.0158ms
2024-05-21 08:48:33.092 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:33.094 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:33.095 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:33.098 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:33.101 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:33.102 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:33.103 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.3832ms.
2024-05-21 08:48:33.104 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:33.105 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.2863ms
2024-05-21 08:48:33.106 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:33.107 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.8165ms
2024-05-21 08:48:33.711 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:48:33.713 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:33.715 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:33.718 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:33.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:33.724 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:33.726 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:33.734 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.3105ms.
2024-05-21 08:48:33.735 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:33.737 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 19.3295ms
2024-05-21 08:48:33.738 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:33.739 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 28.7109ms
2024-05-21 08:48:33.806 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:33.808 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:33.809 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:33.811 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:33.814 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:33.816 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:33.816 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.312ms.
2024-05-21 08:48:33.818 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:33.819 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.4343ms
2024-05-21 08:48:33.820 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:33.821 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.3606ms
2024-05-21 08:48:34.377 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:48:34.380 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:34.382 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:34.385 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:34.387 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:34.390 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:34.391 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:34.398 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.4154ms.
2024-05-21 08:48:34.399 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:34.400 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.911ms
2024-05-21 08:48:34.401 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:34.402 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 24.7748ms
2024-05-21 08:48:34.453 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:34.457 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:34.458 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:34.460 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:34.462 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:34.464 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:34.465 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.9836ms.
2024-05-21 08:48:34.467 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:34.468 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.5929ms
2024-05-21 08:48:34.469 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:34.470 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.8275ms
2024-05-21 08:48:35.687 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - null null
2024-05-21 08:48:35.689 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:48:35.692 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:35.693 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:35.701 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:35.703 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:48:35.704 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.975ms.
2024-05-21 08:48:35.706 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:48:35.707 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 13.8779ms
2024-05-21 08:48:35.708 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:48:35.708 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - 200 null application/json; charset=utf-8 21.8025ms
2024-05-21 08:48:36.772 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:48:36.774 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:36.775 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:36.777 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:36.779 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:48:36.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:48:36.785 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:48:36.791 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.1691ms.
2024-05-21 08:48:36.792 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:48:36.793 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 16.0394ms
2024-05-21 08:48:36.794 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:48:36.795 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 22.8836ms
2024-05-21 08:48:36.840 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:48:36.842 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:36.842 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:48:36.843 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:48:36.845 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:48:36.847 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:48:36.847 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.2687ms.
2024-05-21 08:48:36.849 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:48:36.850 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.3344ms
2024-05-21 08:48:36.850 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:48:36.851 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 10.9376ms
2024-05-21 08:49:04.886 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:49:04.889 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:04.890 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:04.892 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:04.895 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:49:04.898 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:49:04.899 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.9328ms.
2024-05-21 08:49:04.900 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:49:04.902 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 11.1476ms
2024-05-21 08:49:04.903 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:04.904 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 17.8302ms
2024-05-21 08:49:05.230 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:49:05.249 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 18.5716ms
2024-05-21 08:49:05.272 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:49:05.272 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:49:05.274 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 2.3423ms
2024-05-21 08:49:05.292 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.7831ms
2024-05-21 08:49:06.407 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:49:06.418 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.153ms
2024-05-21 08:49:07.735 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:49:07.737 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:07.740 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:07.742 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:07.746 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:49:07.750 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:49:07.753 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:49:07.759 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.2233ms.
2024-05-21 08:49:07.762 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:49:07.764 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 22.5782ms
2024-05-21 08:49:07.765 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:07.766 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 31.3266ms
2024-05-21 08:49:07.819 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:49:07.822 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:07.824 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:07.826 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:07.828 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:49:07.831 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:49:07.831 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.0942ms.
2024-05-21 08:49:07.833 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:49:07.837 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 11.8583ms
2024-05-21 08:49:07.838 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:07.839 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 20.0308ms
2024-05-21 08:49:08.835 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:49:08.838 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:08.839 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:08.840 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:08.842 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:49:08.845 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:49:08.847 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:49:08.853 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.7163ms.
2024-05-21 08:49:08.854 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:49:08.854 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.3982ms
2024-05-21 08:49:08.855 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:08.856 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 20.1845ms
2024-05-21 08:49:08.895 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:49:08.898 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:08.899 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:08.900 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:08.902 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:49:08.903 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:49:08.904 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.7513ms.
2024-05-21 08:49:08.905 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:49:08.905 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.2613ms
2024-05-21 08:49:08.907 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:08.907 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.3898ms
2024-05-21 08:49:09.276 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:49:09.279 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:09.279 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:09.281 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:09.283 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:49:09.287 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:49:09.289 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:49:09.295 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.7614ms.
2024-05-21 08:49:09.297 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:49:09.298 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 17.2884ms
2024-05-21 08:49:09.299 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:09.300 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 23.8472ms
2024-05-21 08:49:09.353 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:49:09.355 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:09.355 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:09.356 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:09.358 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:49:09.359 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:49:09.360 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.9471ms.
2024-05-21 08:49:09.361 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:49:09.362 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.2345ms
2024-05-21 08:49:09.363 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:09.364 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 10.5968ms
2024-05-21 08:49:48.341 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:49:48.343 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:48.347 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:48.348 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:48.353 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:49:48.355 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:49:48.356 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.3905ms.
2024-05-21 08:49:48.358 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:49:48.360 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 12.4983ms
2024-05-21 08:49:48.361 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:48.362 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 20.5989ms
2024-05-21 08:49:48.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:49:48.410 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 16.3035ms
2024-05-21 08:49:48.472 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:49:48.472 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:49:48.483 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.4236ms
2024-05-21 08:49:48.487 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.1562ms
2024-05-21 08:49:49.843 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:49:49.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.2883ms
2024-05-21 08:49:50.814 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:49:50.819 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:50.823 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:50.825 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:50.830 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:49:50.834 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:49:50.836 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:49:50.844 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.1837ms.
2024-05-21 08:49:50.846 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:49:50.847 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 22.2386ms
2024-05-21 08:49:50.848 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:50.849 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 34.1869ms
2024-05-21 08:49:50.893 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:49:50.895 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:50.896 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:50.897 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:50.900 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:49:50.902 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:49:50.902 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.6354ms.
2024-05-21 08:49:50.904 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:49:50.905 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.9628ms
2024-05-21 08:49:50.906 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:50.907 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.1712ms
2024-05-21 08:49:52.106 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:49:52.109 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:52.110 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:52.113 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:52.116 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:49:52.119 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:49:52.122 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:49:52.128 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.8036ms.
2024-05-21 08:49:52.129 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:49:52.131 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 17.8104ms
2024-05-21 08:49:52.131 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:49:52.132 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null text/plain; charset=utf-8 25.9012ms
2024-05-21 08:49:52.195 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:49:52.197 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:52.198 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:52.199 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:52.202 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:49:52.203 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:49:52.203 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.9808ms.
2024-05-21 08:49:52.205 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:49:52.206 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.3527ms
2024-05-21 08:49:52.206 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:52.207 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.3744ms
2024-05-21 08:49:52.884 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - null null
2024-05-21 08:49:52.886 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:49:52.889 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:52.891 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:52.893 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:49:52.896 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:49:52.896 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.629ms.
2024-05-21 08:49:52.898 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:49:52.899 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 7.7043ms
2024-05-21 08:49:52.900 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:49:52.901 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - 200 null application/json; charset=utf-8 17.2425ms
2024-05-21 08:49:58.578 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 63
2024-05-21 08:49:58.580 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:49:58.582 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:58.599 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:58.631 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:49:58.650 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:49:58.651 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51.0788ms.
2024-05-21 08:49:58.652 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:49:58.653 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 70.2928ms
2024-05-21 08:49:58.655 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:49:58.656 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 77.3991ms
2024-05-21 08:49:58.705 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:49:58.707 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:58.708 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:49:58.711 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:49:58.713 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:49:58.715 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:49:58.716 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.3485ms.
2024-05-21 08:49:58.718 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:49:58.719 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.6614ms
2024-05-21 08:49:58.720 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:49:58.721 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.1327ms
2024-05-21 08:50:00.367 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1020 - null null
2024-05-21 08:50:00.369 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:50:00.369 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:00.371 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:00.373 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:50:00.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:50:00.381 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:50:00.381 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.7595ms.
2024-05-21 08:50:00.382 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:50:00.386 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.4922ms
2024-05-21 08:50:00.387 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:50:00.388 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1020 - 200 null application/json; charset=utf-8 21.6769ms
2024-05-21 08:50:00.429 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:50:00.431 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:00.431 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:00.433 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:00.434 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:50:00.435 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:50:00.436 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.4736ms.
2024-05-21 08:50:00.437 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:50:00.438 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.4465ms
2024-05-21 08:50:00.439 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:00.440 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 10.2165ms
2024-05-21 08:50:03.858 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:50:03.860 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:50:03.861 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:03.863 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:03.865 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:50:03.868 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:50:03.871 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:50:03.879 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.7753ms.
2024-05-21 08:50:03.880 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:50:03.881 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 18.4667ms
2024-05-21 08:50:03.882 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:50:03.883 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 24.6407ms
2024-05-21 08:50:03.929 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:50:03.931 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:03.932 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:03.933 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:03.936 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:50:03.939 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:50:03.940 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.7795ms.
2024-05-21 08:50:03.942 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:50:03.943 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 10.626ms
2024-05-21 08:50:03.945 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:03.946 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.4513ms
2024-05-21 08:50:04.413 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - null null
2024-05-21 08:50:04.414 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:50:04.415 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:04.416 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:04.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:50:04.419 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:50:04.420 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.376ms.
2024-05-21 08:50:04.421 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:50:04.422 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 6.2924ms
2024-05-21 08:50:04.423 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:50:04.423 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - 200 null application/json; charset=utf-8 10.6825ms
2024-05-21 08:50:05.174 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - null null
2024-05-21 08:50:05.176 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:50:05.177 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:05.178 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:05.180 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:50:05.183 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:50:05.183 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.4157ms.
2024-05-21 08:50:05.184 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:50:05.185 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 7.1572ms
2024-05-21 08:50:05.186 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:50:05.186 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=2 - 200 null application/json; charset=utf-8 12.3517ms
2024-05-21 08:50:07.466 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:50:07.469 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:07.470 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:07.473 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:07.475 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:50:07.477 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:50:07.478 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7772ms.
2024-05-21 08:50:07.479 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:50:07.480 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.3255ms
2024-05-21 08:50:07.481 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:07.482 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.8398ms
2024-05-21 08:50:08.851 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:50:08.852 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:50:08.853 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:08.855 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:08.858 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:50:08.860 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:50:08.862 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:2733490d-5d61-4c5e-9ccb-0353bd207266
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:50:08.867 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.7679ms.
2024-05-21 08:50:08.868 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:50:08.869 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.1835ms
2024-05-21 08:50:08.870 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:50:08.871 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 20.4657ms
2024-05-21 08:50:08.922 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:50:08.924 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:08.925 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:08.927 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:08.929 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:50:08.931 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:50:08.931 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7386ms.
2024-05-21 08:50:08.932 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:50:08.934 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.1213ms
2024-05-21 08:50:08.934 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:08.935 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.542ms
2024-05-21 08:50:13.798 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 63
2024-05-21 08:50:13.801 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:50:13.802 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:13.804 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:13.808 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:50:13.809 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:50:13.810 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.7869ms.
2024-05-21 08:50:13.811 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:50:13.811 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 8.1559ms
2024-05-21 08:50:13.812 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:50:13.813 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 14.4806ms
2024-05-21 08:50:13.858 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:50:13.860 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:13.860 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:13.861 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:13.863 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:50:13.864 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:50:13.865 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.8242ms.
2024-05-21 08:50:13.866 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:50:13.866 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.2914ms
2024-05-21 08:50:13.867 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:50:13.868 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 9.5226ms
2024-05-21 08:50:15.539 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1021 - null null
2024-05-21 08:50:15.541 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:50:15.541 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:50:15.543 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:50:15.545 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:50:15.547 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:50:15.547 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7184ms.
2024-05-21 08:50:15.549 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:50:15.550 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 7.2922ms
2024-05-21 08:50:15.551 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:50:15.552 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=1021 - 200 null application/json; charset=utf-8 12.9411ms
2024-05-21 08:51:47.356 +07:00 [INF] User profile is available. Using 'C:\Users\hoang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-21 08:51:47.623 +07:00 [INF] Now listening on: https://localhost:7035
2024-05-21 08:51:47.625 +07:00 [INF] Now listening on: http://localhost:5287
2024-05-21 08:51:47.628 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-21 08:51:47.629 +07:00 [INF] Hosting environment: Development
2024-05-21 08:51:47.630 +07:00 [INF] Content root path: D:\API\ProjectWeb2\WebAPIAnimals\ControllerAPI
2024-05-21 08:51:48.632 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/index.html - null null
2024-05-21 08:51:48.781 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:51:48.836 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:51:48.867 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:51:48.968 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/index.html - 200 null text/html;charset=utf-8 337.1956ms
2024-05-21 08:51:49.128 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:51:49.200 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - null null
2024-05-21 08:51:49.211 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.6141ms
2024-05-21 08:51:49.221 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/_vs/browserLink - null null
2024-05-21 08:51:49.284 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.0639ms
2024-05-21 08:51:50.410 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - null null
2024-05-21 08:51:50.541 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 130.5898ms
2024-05-21 08:51:50.898 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:51:50.942 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:51:50.949 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1814.2391ms.
2024-05-21 08:51:50.959 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:51:50.982 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 2106.965ms
2024-05-21 08:51:50.984 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:51:51.001 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 2220.0188ms
2024-05-21 08:52:01.869 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/GetAll - null null
2024-05-21 08:52:01.874 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:52:01.875 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:52:01.878 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:52:01.899 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:52:01.901 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:52:01.903 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.4548ms.
2024-05-21 08:52:01.908 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:52:01.909 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 32.2667ms
2024-05-21 08:52:01.910 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:52:01.911 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/GetAll - 200 null application/json; charset=utf-8 42.2122ms
2024-05-21 08:52:05.209 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1021 - null null
2024-05-21 08:52:05.214 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:52:05.216 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:52:05.219 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:52:05.334 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:52:05.463 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:52:05.471 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:52:05.472 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 252.1277ms.
2024-05-21 08:52:05.473 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:52:05.478 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 260.6456ms
2024-05-21 08:52:05.479 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:52:05.480 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1021 - 200 null application/json; charset=utf-8 271.0887ms
2024-05-21 08:52:05.525 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:52:05.527 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:52:05.528 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:52:05.530 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:52:05.532 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:52:05.533 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:52:05.534 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.5267ms.
2024-05-21 08:52:05.535 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:52:05.536 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.3877ms
2024-05-21 08:52:05.536 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:52:05.537 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.0094ms
2024-05-21 08:52:08.712 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7035/api/Animal/Push - application/json 83
2024-05-21 08:52:08.716 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:52:08.718 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:52:08.734 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:52:08.768 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:52:08.784 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:52:08.787 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 50.6897ms.
2024-05-21 08:52:08.789 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:52:08.791 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 71.7476ms
2024-05-21 08:52:08.792 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:52:08.793 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 80.5441ms
2024-05-21 08:52:11.387 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7035/api/Animal/GetAll - null null
2024-05-21 08:52:11.389 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:52:11.391 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:52:11.393 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:52:11.397 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:52:11.399 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:52:11.399 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.8151ms.
2024-05-21 08:52:11.401 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:52:11.402 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.869ms
2024-05-21 08:52:11.402 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:52:11.403 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7035/api/Animal/GetAll - 200 null application/json; charset=utf-8 15.9591ms
2024-05-21 08:55:05.336 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:55:05.339 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:05.339 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:05.340 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:05.345 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:55:05.348 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:55:05.348 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.0529ms.
2024-05-21 08:55:05.350 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:05.351 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 10.8691ms
2024-05-21 08:55:05.352 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:05.353 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.4837ms
2024-05-21 08:55:06.205 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1022 - null null
2024-05-21 08:55:06.207 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:06.208 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:06.209 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:06.213 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:55:06.220 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:55:06.221 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:55:06.222 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.8679ms.
2024-05-21 08:55:06.223 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:55:06.224 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 14.9665ms
2024-05-21 08:55:06.225 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:06.225 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=1022 - 200 null application/json; charset=utf-8 20.5615ms
2024-05-21 08:55:06.275 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:55:06.276 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:06.277 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:06.279 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:06.282 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:55:06.284 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:55:06.284 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.6861ms.
2024-05-21 08:55:06.285 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:06.287 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.3348ms
2024-05-21 08:55:06.288 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:06.289 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.1566ms
2024-05-21 08:55:24.786 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 57
2024-05-21 08:55:24.791 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:55:24.791 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:24.796 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:24.807 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:55:24.825 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Animals'. Cannot insert duplicate key in object 'dbo.Animals'. The duplicate key value is (2).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:77f13ec2-e546-429f-ab52-8d898c8b8dcf
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_Animals'. Cannot insert duplicate key in object 'dbo.Animals'. The duplicate key value is (2).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:77f13ec2-e546-429f-ab52-8d898c8b8dcf
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:55:24.831 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.7362ms.
2024-05-21 08:55:24.832 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:55:24.833 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 41.3532ms
2024-05-21 08:55:24.834 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:55:24.835 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null text/plain; charset=utf-8 48.5543ms
2024-05-21 08:55:45.671 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:55:45.674 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:45.676 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:45.678 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:45.681 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:55:45.684 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:55:45.687 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:77f13ec2-e546-429f-ab52-8d898c8b8dcf
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:77f13ec2-e546-429f-ab52-8d898c8b8dcf
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:55:45.692 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.5002ms.
2024-05-21 08:55:45.693 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:55:45.694 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 15.8229ms
2024-05-21 08:55:45.695 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:45.695 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 24.5608ms
2024-05-21 08:55:45.738 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:55:45.742 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:45.743 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:45.745 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:45.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:55:45.749 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:55:45.750 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.0105ms.
2024-05-21 08:55:45.751 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:45.752 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.9252ms
2024-05-21 08:55:45.752 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:45.753 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.2506ms
2024-05-21 08:55:46.242 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:55:46.245 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:46.247 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:46.249 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:46.253 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:55:46.256 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:55:46.258 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'DataAnimals.Data.DataContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:77f13ec2-e546-429f-ab52-8d898c8b8dcf
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_AnimalCategories_Animals_Animal_Id". The conflict occurred in database "AnimalApi", table "dbo.AnimalCategories", column 'Animal_Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:77f13ec2-e546-429f-ab52-8d898c8b8dcf
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-05-21 08:55:46.264 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.7241ms.
2024-05-21 08:55:46.265 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-05-21 08:55:46.266 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 16.8929ms
2024-05-21 08:55:46.267 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:46.268 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null text/plain; charset=utf-8 26.0403ms
2024-05-21 08:55:46.319 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:55:46.322 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:46.323 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:46.325 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:46.328 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:55:46.331 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:55:46.332 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.6945ms.
2024-05-21 08:55:46.333 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:46.334 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 9.4362ms
2024-05-21 08:55:46.335 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:46.336 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.247ms
2024-05-21 08:55:47.602 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - null null
2024-05-21 08:55:47.605 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:55:47.607 +07:00 [INF] Route matched with {action = "Get", controller = "AC"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult Get() on controller ControllerAPI.Controllers.ACController (ControllerAPI).
2024-05-21 08:55:47.608 +07:00 [INF] Executing action method ControllerAPI.Controllers.ACController.Get (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:47.662 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a0].[Name] AS [Animal_Name], [c].[Name] AS [Category_Name]
FROM [AnimalCategories] AS [a]
LEFT JOIN [Animals] AS [a0] ON [a].[Animal_Id] = [a0].[Id]
LEFT JOIN [Categories] AS [c] ON [a].[Category_Id] = [c].[Id]
2024-05-21 08:55:47.667 +07:00 [INF] Executed action method ControllerAPI.Controllers.ACController.Get (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.7042ms.
2024-05-21 08:55:47.668 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Warehouse.ACDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:47.671 +07:00 [INF] Executed action ControllerAPI.Controllers.ACController.Get (ControllerAPI) in 63.5402ms
2024-05-21 08:55:47.672 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:55:47.673 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - 200 null application/json; charset=utf-8 71.5401ms
2024-05-21 08:55:48.499 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/AC/Delete?Id=5 - null null
2024-05-21 08:55:48.503 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.ACController.Delete (ControllerAPI)'
2024-05-21 08:55:48.505 +07:00 [INF] Route matched with {action = "Delete", controller = "AC"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult Delete(Int32) on controller ControllerAPI.Controllers.ACController (ControllerAPI).
2024-05-21 08:55:48.507 +07:00 [INF] Executing action method ControllerAPI.Controllers.ACController.Delete (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:48.514 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ID_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Animal_Id], [a].[Category_Id]
FROM [AnimalCategories] AS [a]
WHERE [a].[Id] = @__ID_0
2024-05-21 08:55:48.537 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AnimalCategories]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:55:48.541 +07:00 [INF] Executed action method ControllerAPI.Controllers.ACController.Delete (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.1057ms.
2024-05-21 08:55:48.542 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.AnimalCategory'.
2024-05-21 08:55:48.544 +07:00 [INF] Executed action ControllerAPI.Controllers.ACController.Delete (ControllerAPI) in 38.0546ms
2024-05-21 08:55:48.545 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.ACController.Delete (ControllerAPI)'
2024-05-21 08:55:48.546 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/AC/Delete?Id=5 - 200 null application/json; charset=utf-8 46.5988ms
2024-05-21 08:55:48.592 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - null null
2024-05-21 08:55:48.595 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:55:48.596 +07:00 [INF] Route matched with {action = "Get", controller = "AC"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult Get() on controller ControllerAPI.Controllers.ACController (ControllerAPI).
2024-05-21 08:55:48.598 +07:00 [INF] Executing action method ControllerAPI.Controllers.ACController.Get (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:48.601 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a0].[Name] AS [Animal_Name], [c].[Name] AS [Category_Name]
FROM [AnimalCategories] AS [a]
LEFT JOIN [Animals] AS [a0] ON [a].[Animal_Id] = [a0].[Id]
LEFT JOIN [Categories] AS [c] ON [a].[Category_Id] = [c].[Id]
2024-05-21 08:55:48.602 +07:00 [INF] Executed action method ControllerAPI.Controllers.ACController.Get (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.7671ms.
2024-05-21 08:55:48.603 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Warehouse.ACDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:48.604 +07:00 [INF] Executed action ControllerAPI.Controllers.ACController.Get (ControllerAPI) in 6.53ms
2024-05-21 08:55:48.605 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:55:48.606 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - 200 null application/json; charset=utf-8 14.2034ms
2024-05-21 08:55:48.951 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/AC/Delete?Id=9 - null null
2024-05-21 08:55:48.954 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.ACController.Delete (ControllerAPI)'
2024-05-21 08:55:48.956 +07:00 [INF] Route matched with {action = "Delete", controller = "AC"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult Delete(Int32) on controller ControllerAPI.Controllers.ACController (ControllerAPI).
2024-05-21 08:55:48.958 +07:00 [INF] Executing action method ControllerAPI.Controllers.ACController.Delete (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:48.961 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ID_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Animal_Id], [a].[Category_Id]
FROM [AnimalCategories] AS [a]
WHERE [a].[Id] = @__ID_0
2024-05-21 08:55:48.966 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [AnimalCategories]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:55:48.969 +07:00 [INF] Executed action method ControllerAPI.Controllers.ACController.Delete (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.6914ms.
2024-05-21 08:55:48.970 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.AnimalCategory'.
2024-05-21 08:55:48.971 +07:00 [INF] Executed action ControllerAPI.Controllers.ACController.Delete (ControllerAPI) in 13.7521ms
2024-05-21 08:55:48.972 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.ACController.Delete (ControllerAPI)'
2024-05-21 08:55:48.973 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/AC/Delete?Id=9 - 200 null application/json; charset=utf-8 21.7999ms
2024-05-21 08:55:49.027 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - null null
2024-05-21 08:55:49.029 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:55:49.030 +07:00 [INF] Route matched with {action = "Get", controller = "AC"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult Get() on controller ControllerAPI.Controllers.ACController (ControllerAPI).
2024-05-21 08:55:49.032 +07:00 [INF] Executing action method ControllerAPI.Controllers.ACController.Get (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:49.035 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a0].[Name] AS [Animal_Name], [c].[Name] AS [Category_Name]
FROM [AnimalCategories] AS [a]
LEFT JOIN [Animals] AS [a0] ON [a].[Animal_Id] = [a0].[Id]
LEFT JOIN [Categories] AS [c] ON [a].[Category_Id] = [c].[Id]
2024-05-21 08:55:49.037 +07:00 [INF] Executed action method ControllerAPI.Controllers.ACController.Get (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.6822ms.
2024-05-21 08:55:49.038 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Warehouse.ACDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:49.039 +07:00 [INF] Executed action ControllerAPI.Controllers.ACController.Get (ControllerAPI) in 7.1827ms
2024-05-21 08:55:49.040 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.ACController.Get (ControllerAPI)'
2024-05-21 08:55:49.041 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/AC/Get-All - 200 null application/json; charset=utf-8 14.0839ms
2024-05-21 08:55:50.110 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:55:50.113 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:50.114 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:50.115 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:50.118 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:55:50.119 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:55:50.119 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.2408ms.
2024-05-21 08:55:50.120 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:50.121 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.0878ms
2024-05-21 08:55:50.122 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:50.123 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.2147ms
2024-05-21 08:55:50.981 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - null null
2024-05-21 08:55:50.985 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:50.986 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:50.987 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:50.989 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:55:50.993 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:55:50.995 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:55:50.995 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.4529ms.
2024-05-21 08:55:50.996 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:55:50.997 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 10.3565ms
2024-05-21 08:55:50.998 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:50.998 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=2 - 200 null application/json; charset=utf-8 17.7839ms
2024-05-21 08:55:51.040 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:55:51.044 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:51.046 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:51.047 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:51.050 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:55:51.051 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:55:51.052 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.753ms.
2024-05-21 08:55:51.053 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:51.054 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.0342ms
2024-05-21 08:55:51.055 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:51.057 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 16.9715ms
2024-05-21 08:55:51.492 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - null null
2024-05-21 08:55:51.496 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:51.496 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:51.499 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:51.501 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:55:51.505 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:55:51.507 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:55:51.508 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.9852ms.
2024-05-21 08:55:51.509 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:55:51.510 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 11.1998ms
2024-05-21 08:55:51.510 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:55:51.511 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=3 - 200 null application/json; charset=utf-8 19.0199ms
2024-05-21 08:55:51.560 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:55:51.563 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:51.564 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:51.565 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:51.568 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:55:51.569 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:55:51.570 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.7701ms.
2024-05-21 08:55:51.571 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:51.572 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.9672ms
2024-05-21 08:55:51.573 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:51.574 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 13.1295ms
2024-05-21 08:55:56.183 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 51
2024-05-21 08:55:56.186 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:55:56.187 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:56.189 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:56.191 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:55:56.193 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:55:56.194 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.4125ms.
2024-05-21 08:55:56.195 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:55:56.196 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 7.9607ms
2024-05-21 08:55:56.197 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:55:56.197 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 14.0837ms
2024-05-21 08:55:56.247 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:55:56.251 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:56.251 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:55:56.253 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:55:56.255 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:55:56.257 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:55:56.257 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.822ms.
2024-05-21 08:55:56.258 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:55:56.260 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 7.3789ms
2024-05-21 08:55:56.260 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:55:56.261 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.3304ms
2024-05-21 08:56:00.943 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 51
2024-05-21 08:56:00.945 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:56:00.946 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:00.947 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:00.950 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:56:00.951 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:56:00.952 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.0891ms.
2024-05-21 08:56:00.953 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:56:00.954 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 7.3393ms
2024-05-21 08:56:00.955 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:56:00.956 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 12.6853ms
2024-05-21 08:56:01.002 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:56:01.004 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:01.004 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:01.006 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:01.008 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:56:01.009 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:56:01.010 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.4653ms.
2024-05-21 08:56:01.011 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:56:01.012 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.4494ms
2024-05-21 08:56:01.012 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:01.013 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.1662ms
2024-05-21 08:56:04.474 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - null null
2024-05-21 08:56:04.477 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:56:04.480 +07:00 [INF] Route matched with {action = "GetId", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetId(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:04.483 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:04.490 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:56:04.492 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AnimalDto
2024-05-21 08:56:04.495 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.5964ms.
2024-05-21 08:56:04.497 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AnimalDto'.
2024-05-21 08:56:04.498 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI) in 15.2462ms
2024-05-21 08:56:04.499 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.GetId (ControllerAPI)'
2024-05-21 08:56:04.500 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/Get-By-Id?id=3 - 200 null application/json; charset=utf-8 25.6754ms
2024-05-21 08:56:30.491 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=4 - null null
2024-05-21 08:56:30.494 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:56:30.496 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:30.497 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:30.500 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:56:30.503 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:56:30.505 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:56:30.506 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.028ms.
2024-05-21 08:56:30.507 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:56:30.508 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 11.6451ms
2024-05-21 08:56:30.510 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:56:30.511 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=4 - 200 null application/json; charset=utf-8 20.062ms
2024-05-21 08:56:30.566 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:56:30.571 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:30.572 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:30.574 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:30.577 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:56:30.579 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:56:30.579 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.2932ms.
2024-05-21 08:56:30.580 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:56:30.581 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.1312ms
2024-05-21 08:56:30.582 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:30.583 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 17.0026ms
2024-05-21 08:56:35.149 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 51
2024-05-21 08:56:35.152 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:56:35.152 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:35.154 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:35.157 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:56:35.159 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:56:35.159 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.2878ms.
2024-05-21 08:56:35.160 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:56:35.161 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 7.4261ms
2024-05-21 08:56:35.162 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:56:35.162 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 13.4472ms
2024-05-21 08:56:35.210 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:56:35.215 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:35.215 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:35.217 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:35.219 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:56:35.222 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:56:35.222 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.9173ms.
2024-05-21 08:56:35.223 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:56:35.224 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 8.099ms
2024-05-21 08:56:35.225 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:35.226 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 15.5028ms
2024-05-21 08:56:36.754 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=5 - null null
2024-05-21 08:56:36.758 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:56:36.759 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:36.761 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:36.763 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:56:36.765 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:56:36.766 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:56:36.767 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5.0684ms.
2024-05-21 08:56:36.768 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:56:36.768 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 7.7859ms
2024-05-21 08:56:36.769 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:56:36.770 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=5 - 200 null application/json; charset=utf-8 15.8831ms
2024-05-21 08:56:36.813 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:56:36.815 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:36.816 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:36.817 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:36.819 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:56:36.821 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:56:36.822 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.4344ms.
2024-05-21 08:56:36.822 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:56:36.823 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.1693ms
2024-05-21 08:56:36.824 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:36.825 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.4501ms
2024-05-21 08:56:50.248 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 51
2024-05-21 08:56:50.252 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:56:50.253 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:50.254 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:50.256 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:56:50.258 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:56:50.258 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.1259ms.
2024-05-21 08:56:50.259 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:56:50.259 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 5.6991ms
2024-05-21 08:56:50.260 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:56:50.261 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 12.7675ms
2024-05-21 08:56:50.302 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:56:50.305 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:50.305 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:50.307 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:50.308 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:56:50.309 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:56:50.310 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.9173ms.
2024-05-21 08:56:50.311 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:56:50.312 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 5.4176ms
2024-05-21 08:56:50.312 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:50.313 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 11.2095ms
2024-05-21 08:56:54.517 +07:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=5 - null null
2024-05-21 08:56:54.521 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:56:54.522 +07:00 [INF] Route matched with {action = "DeleteById", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteById(Int32) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:54.523 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:54.524 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AgeAvg], [a].[CatergoryAnimal_Id], [a].[Description], [a].[Name], [a].[Url]
FROM [Animals] AS [a]
WHERE [a].[Id] = @__id_0
2024-05-21 08:56:54.528 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Animals]
OUTPUT 1
WHERE [Id] = @p0;
2024-05-21 08:56:54.529 +07:00 [INF] Animal Page => DataAnimals.Models.Animal
2024-05-21 08:56:54.530 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.4223ms.
2024-05-21 08:56:54.531 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.Models.Animal'.
2024-05-21 08:56:54.531 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI) in 8.7032ms
2024-05-21 08:56:54.532 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.DeleteById (ControllerAPI)'
2024-05-21 08:56:54.533 +07:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7035/api/Animal/Delete?id=5 - 200 null application/json; charset=utf-8 15.6462ms
2024-05-21 08:56:54.579 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:56:54.583 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:54.584 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:56:54.586 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:56:54.588 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:56:54.590 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:56:54.590 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.0358ms.
2024-05-21 08:56:54.591 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:56:54.592 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.5197ms
2024-05-21 08:56:54.593 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:56:54.593 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 14.2919ms
2024-05-21 08:57:06.437 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:7035/api/Animal/Push - application/json; charset=utf-8 51
2024-05-21 08:57:06.442 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:57:06.442 +07:00 [INF] Route matched with {action = "Post", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(DataAnimals.DTO.Animal.AddAnimalDto) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:57:06.444 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:57:06.446 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Single), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Animals] ([AgeAvg], [CatergoryAnimal_Id], [Description], [Name], [Url])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-05-21 08:57:06.449 +07:00 [INF] Animal Page => DataAnimals.DTO.Animal.AddAnimalDto
2024-05-21 08:57:06.449 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Post (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4.7686ms.
2024-05-21 08:57:06.451 +07:00 [INF] Executing OkObjectResult, writing value of type 'DataAnimals.DTO.Animal.AddAnimalDto'.
2024-05-21 08:57:06.452 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Post (ControllerAPI) in 8.3558ms
2024-05-21 08:57:06.452 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Post (ControllerAPI)'
2024-05-21 08:57:06.453 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:7035/api/Animal/Push - 200 null application/json; charset=utf-8 15.883ms
2024-05-21 08:57:06.501 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - null null
2024-05-21 08:57:06.504 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:57:06.505 +07:00 [INF] Route matched with {action = "Filtering", controller = "Animal"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Filtering(System.String, Int32, Single, Boolean) on controller ControllerAPI.Controllers.AnimalController (ControllerAPI).
2024-05-21 08:57:06.507 +07:00 [INF] Executing action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:57:06.509 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id] AS [ID], [a].[Name], [a].[Description], [a].[AgeAvg], [a].[Url]
FROM [Animals] AS [a]
2024-05-21 08:57:06.511 +07:00 [INF] Animal Page => System.Collections.Generic.List`1[DataAnimals.DTO.Animal.AnimalDto]
2024-05-21 08:57:06.511 +07:00 [INF] Executed action method ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.3241ms.
2024-05-21 08:57:06.512 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Animal.AnimalDto, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:57:06.513 +07:00 [INF] Executed action ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI) in 6.0486ms
2024-05-21 08:57:06.513 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.AnimalController.Filtering (ControllerAPI)'
2024-05-21 08:57:06.514 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Animal/GetAll?name=&isAccess=False - 200 null application/json; charset=utf-8 12.9565ms
2024-05-21 08:57:33.663 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:7035/api/Category/Get-All - null null
2024-05-21 08:57:33.665 +07:00 [INF] Executing endpoint 'ControllerAPI.Controllers.CategoryController.GetAll (ControllerAPI)'
2024-05-21 08:57:33.667 +07:00 [INF] Route matched with {action = "GetAll", controller = "Category"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll() on controller ControllerAPI.Controllers.CategoryController (ControllerAPI).
2024-05-21 08:57:33.669 +07:00 [INF] Executing action method ControllerAPI.Controllers.CategoryController.GetAll (ControllerAPI) - Validation state: "Valid"
2024-05-21 08:57:33.725 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name], [t].[Name], [t].[Id], [t].[Id0]
FROM [Categories] AS [c]
LEFT JOIN (
    SELECT [a0].[Name], [a].[Id], [a0].[Id] AS [Id0], [a].[Category_Id]
    FROM [AnimalCategories] AS [a]
    LEFT JOIN [Animals] AS [a0] ON [a].[Animal_Id] = [a0].[Id]
) AS [t] ON [c].[Id] = [t].[Category_Id]
ORDER BY [c].[Id], [t].[Id]
2024-05-21 08:57:33.731 +07:00 [INF] Category Page => System.Collections.Generic.List`1[DataAnimals.DTO.Category.CategoryDTO]
2024-05-21 08:57:33.732 +07:00 [INF] Executed action method ControllerAPI.Controllers.CategoryController.GetAll (ControllerAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 61.5149ms.
2024-05-21 08:57:33.733 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DataAnimals.DTO.Category.CategoryDTO, DataAnimals, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-05-21 08:57:33.735 +07:00 [INF] Executed action ControllerAPI.Controllers.CategoryController.GetAll (ControllerAPI) in 66.5529ms
2024-05-21 08:57:33.736 +07:00 [INF] Executed endpoint 'ControllerAPI.Controllers.CategoryController.GetAll (ControllerAPI)'
2024-05-21 08:57:33.737 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:7035/api/Category/Get-All - 200 null application/json; charset=utf-8 73.8827ms
